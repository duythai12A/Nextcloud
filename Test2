
namespace OCA\SvgSanitizer\Listener;

use OCP\EventDispatcher\Event;
use OCP\EventDispatcher\IEventListener;
use OCP\Files\Node;
use OCP\Http\Client\IClientService;
use OCP\ILogger;

class SvgSanitizeListener implements IEventListener {

    public function __construct(
        private IClientService $client,
        private ILogger $logger
    ) {}

    public function handle(Event $event): void {
        if (!method_exists($event, 'getNode')) return;

        $node = $event->getNode();
        if (strtolower((string)$node->getExtension()) !== 'svg') return;

        $this->logger->warning('SVG_SANITIZER: listener triggered ' . $node->getName());
        // (logic sanitize ở đây)
    }
}
